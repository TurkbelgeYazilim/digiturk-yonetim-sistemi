{
    "sourceFile": "primebaz_rapor_yukle_status.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1759319722065,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1759320313809,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,122 @@\n+<?php\r\n+require_once 'config/mssql.php';\r\n+?>\r\n+<!DOCTYPE html>\r\n+<html lang=\"tr\">\r\n+<head>\r\n+    <meta charset=\"UTF-8\">\r\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n+    <title>Primebaz Rapor Durumu</title>\r\n+    <style>\r\n+        body { font-family: Arial, sans-serif; margin: 20px; }\r\n+        .container { max-width: 1200px; margin: 0 auto; }\r\n+        table { border-collapse: collapse; width: 100%; margin: 20px 0; }\r\n+        th, td { padding: 8px 12px; border: 1px solid #ddd; text-align: left; }\r\n+        th { background-color: #f2f2f2; font-weight: bold; }\r\n+        .number { text-align: center; }\r\n+        .center { text-align: center; }\r\n+        .success { color: green; font-weight: bold; }\r\n+        .error { color: red; font-weight: bold; }\r\n+        .link-button { \r\n+            background-color: #007bff; \r\n+            color: white; \r\n+            padding: 10px 20px; \r\n+            text-decoration: none; \r\n+            border-radius: 5px; \r\n+            display: inline-block;\r\n+            margin: 10px 0;\r\n+        }\r\n+        .link-button:hover { background-color: #0056b3; }\r\n+    </style>\r\n+</head>\r\n+<body>\r\n+<div class=\"container\">\r\n+    <h1>Primebaz Rapor Durumu</h1>\r\n+\r\n+<?php\r\n+try {\r\n+    $pdo = new PDO('sqlsrv:Server=localhost\\\\SQLEXPRESS;Database=digiturk', '', '', [\r\n+        PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION\r\n+    ]);\r\n+    \r\n+    // Check record count\r\n+    $stmt = $pdo->query(\"SELECT COUNT(*) as total FROM primebaz_rapor\");\r\n+    $result = $stmt->fetch(PDO::FETCH_ASSOC);\r\n+    \r\n+    echo \"<div style='background-color: #e8f5e8; padding: 15px; border-radius: 5px; margin: 20px 0;'>\";\r\n+    echo \"<h3 style='margin: 0 0 10px 0;'>üìä Veritabanƒ± Durumu</h3>\";\r\n+    echo \"<p style='margin: 0; font-size: 18px;'>Toplam kayƒ±t sayƒ±sƒ±: <span class='success'>\" . number_format($result['total']) . \"</span></p>\";\r\n+    echo \"</div>\";\r\n+    \r\n+    if ($result['total'] > 0) {\r\n+        // Show file statistics\r\n+        $stmt = $pdo->query(\"\r\n+            SELECT \r\n+                dosya_adi,\r\n+                COUNT(*) as kayit_sayisi,\r\n+                MIN(yuklenme_tarihi) as ilk_yukleme_tarihi,\r\n+                MAX(yuklenme_tarihi) as son_yukleme_tarihi\r\n+            FROM primebaz_rapor \r\n+            WHERE dosya_adi IS NOT NULL \r\n+            GROUP BY dosya_adi \r\n+            ORDER BY MAX(yuklenme_tarihi) DESC\r\n+        \");\r\n+        \r\n+        echo \"<h4>üìÅ Dosya Bazƒ±nda Kayƒ±t ƒ∞statistikleri:</h4>\";\r\n+        echo \"<table>\";\r\n+        echo \"<tr>\r\n+                <th>Dosya Adƒ±</th>\r\n+                <th class='center'>Kayƒ±t Sayƒ±sƒ±</th>\r\n+                <th class='center'>ƒ∞lk Y√ºkleme Tarihi</th>\r\n+                <th class='center'>Son Y√ºkleme Tarihi</th>\r\n+              </tr>\";\r\n+        \r\n+        while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {\r\n+            echo \"<tr>\";\r\n+            echo \"<td><strong>\" . htmlspecialchars($row['dosya_adi']) . \"</strong></td>\";\r\n+            echo \"<td class='number'>\" . number_format($row['kayit_sayisi']) . \"</td>\";\r\n+            echo \"<td class='center'>\" . \r\n+                 date('d.m.Y H:i:s', strtotime($row['ilk_yukleme_tarihi'])) . \"</td>\";\r\n+            echo \"<td class='center'>\" . \r\n+                 date('d.m.Y H:i:s', strtotime($row['son_yukleme_tarihi'])) . \"</td>\";\r\n+            echo \"</tr>\";\r\n+        }\r\n+        echo \"</table>\";\r\n+        \r\n+        // Check for QWH, QWT, NYA values\r\n+        $stmt = $pdo->query(\"SELECT kampanya_kodu, COUNT(*) as count FROM primebaz_rapor WHERE kampanya_kodu IS NOT NULL GROUP BY kampanya_kodu ORDER BY count DESC\");\r\n+        \r\n+        echo \"<h4>üè∑Ô∏è Kampanya Kodlarƒ± Daƒüƒ±lƒ±mƒ±:</h4>\";\r\n+        echo \"<table>\";\r\n+        echo \"<tr><th>Kampanya Kodu</th><th class='center'>Adet</th></tr>\";\r\n+        \r\n+        while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {\r\n+            echo \"<tr>\";\r\n+            echo \"<td><strong>\" . htmlspecialchars($row['kampanya_kodu']) . \"</strong></td>\";\r\n+            echo \"<td class='number'>\" . number_format($row['count']) . \"</td>\";\r\n+            echo \"</tr>\";\r\n+        }\r\n+        echo \"</table>\";\r\n+    } else {\r\n+        echo \"<div style='background-color: #fff3cd; padding: 15px; border-radius: 5px; margin: 20px 0;'>\";\r\n+        echo \"<p style='margin: 0;'>‚ö†Ô∏è Hen√ºz hi√ß veri y√ºklenmemi≈ü.</p>\";\r\n+        echo \"</div>\";\r\n+    }\r\n+    \r\n+} catch (Exception $e) {\r\n+    echo \"<div style='background-color: #f8d7da; padding: 15px; border-radius: 5px; margin: 20px 0;'>\";\r\n+    echo \"<p style='margin: 0;'>‚ùå <strong>Hata:</strong> \" . htmlspecialchars($e->getMessage()) . \"</p>\";\r\n+    echo \"</div>\";\r\n+}\r\n+?>\r\n+\r\n+<hr style=\"margin: 30px 0;\">\r\n+<div style=\"text-align: center;\">\r\n+    <h3>üîß ƒ∞≈ülemler</h3>\r\n+    <a href=\"primebaz_rapor_yukle.php\" class=\"link-button\">\udce4 Rapor Y√ºkleme Sayfasƒ±</a>\r\n+    <a href=\"?\" class=\"link-button\" onclick=\"location.reload();\">üîÑ Sayfayƒ± Yenile</a>\r\n+</div>\r\n+\r\n+</div>\r\n+</body>\r\n+</html>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1759320324366,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -112,9 +112,9 @@\n \r\n <hr style=\"margin: 30px 0;\">\r\n <div style=\"text-align: center;\">\r\n     <h3>üîß ƒ∞≈ülemler</h3>\r\n-    <a href=\"primebaz_rapor_yukle.php\" class=\"link-button\">ÔøΩ Rapor Y√ºkleme Sayfasƒ±</a>\r\n+    <a href=\"primebaz_rapor_yukle.php\" class=\"link-button\">\udce4 Rapor Y√ºkleme Sayfasƒ±</a>\r\n     <a href=\"?\" class=\"link-button\" onclick=\"location.reload();\">üîÑ Sayfayƒ± Yenile</a>\r\n </div>\r\n \r\n </div>\r\n"
                },
                {
                    "date": 1759321919494,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,122 @@\n+<?php\r\n+require_once 'config/mssql.php';\r\n+?>\r\n+<!DOCTYPE html>\r\n+<html lang=\"tr\">\r\n+<head>\r\n+    <meta charset=\"UTF-8\">\r\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n+    <title>Primebaz Rapor Durumu</title>\r\n+    <style>\r\n+        body { font-family: Arial, sans-serif; margin: 20px; }\r\n+        .container { max-width: 1200px; margin: 0 auto; }\r\n+        table { border-collapse: collapse; width: 100%; margin: 20px 0; }\r\n+        th, td { padding: 8px 12px; border: 1px solid #ddd; text-align: left; }\r\n+        th { background-color: #f2f2f2; font-weight: bold; }\r\n+        .number { text-align: center; }\r\n+        .center { text-align: center; }\r\n+        .success { color: green; font-weight: bold; }\r\n+        .error { color: red; font-weight: bold; }\r\n+        .link-button { \r\n+            background-color: #007bff; \r\n+            color: white; \r\n+            padding: 10px 20px; \r\n+            text-decoration: none; \r\n+            border-radius: 5px; \r\n+            display: inline-block;\r\n+            margin: 10px 0;\r\n+        }\r\n+        .link-button:hover { background-color: #0056b3; }\r\n+    </style>\r\n+</head>\r\n+<body>\r\n+<div class=\"container\">\r\n+    <h1>Primebaz Rapor Durumu</h1>\r\n+\r\n+<?php\r\n+try {\r\n+    $pdo = new PDO('sqlsrv:Server=localhost\\\\SQLEXPRESS;Database=digiturk', '', '', [\r\n+        PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION\r\n+    ]);\r\n+    \r\n+    // Check record count\r\n+    $stmt = $pdo->query(\"SELECT COUNT(*) as total FROM primebaz_rapor\");\r\n+    $result = $stmt->fetch(PDO::FETCH_ASSOC);\r\n+    \r\n+    echo \"<div style='background-color: #e8f5e8; padding: 15px; border-radius: 5px; margin: 20px 0;'>\";\r\n+    echo \"<h3 style='margin: 0 0 10px 0;'>üìä Veritabanƒ± Durumu</h3>\";\r\n+    echo \"<p style='margin: 0; font-size: 18px;'>Toplam kayƒ±t sayƒ±sƒ±: <span class='success'>\" . number_format($result['total']) . \"</span></p>\";\r\n+    echo \"</div>\";\r\n+    \r\n+    if ($result['total'] > 0) {\r\n+        // Show file statistics\r\n+        $stmt = $pdo->query(\"\r\n+            SELECT \r\n+                dosya_adi,\r\n+                COUNT(*) as kayit_sayisi,\r\n+                MIN(yuklenme_tarihi) as ilk_yukleme_tarihi,\r\n+                MAX(yuklenme_tarihi) as son_yukleme_tarihi\r\n+            FROM primebaz_rapor \r\n+            WHERE dosya_adi IS NOT NULL \r\n+            GROUP BY dosya_adi \r\n+            ORDER BY MAX(yuklenme_tarihi) DESC\r\n+        \");\r\n+        \r\n+        echo \"<h4>üìÅ Dosya Bazƒ±nda Kayƒ±t ƒ∞statistikleri:</h4>\";\r\n+        echo \"<table>\";\r\n+        echo \"<tr>\r\n+                <th>Dosya Adƒ±</th>\r\n+                <th class='center'>Kayƒ±t Sayƒ±sƒ±</th>\r\n+                <th class='center'>ƒ∞lk Y√ºkleme Tarihi</th>\r\n+                <th class='center'>Son Y√ºkleme Tarihi</th>\r\n+              </tr>\";\r\n+        \r\n+        while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {\r\n+            echo \"<tr>\";\r\n+            echo \"<td><strong>\" . htmlspecialchars($row['dosya_adi']) . \"</strong></td>\";\r\n+            echo \"<td class='number'>\" . number_format($row['kayit_sayisi']) . \"</td>\";\r\n+            echo \"<td class='center'>\" . \r\n+                 date('d.m.Y H:i:s', strtotime($row['ilk_yukleme_tarihi'])) . \"</td>\";\r\n+            echo \"<td class='center'>\" . \r\n+                 date('d.m.Y H:i:s', strtotime($row['son_yukleme_tarihi'])) . \"</td>\";\r\n+            echo \"</tr>\";\r\n+        }\r\n+        echo \"</table>\";\r\n+        \r\n+        // Check for Prim Durum A√ßƒ±klama values\r\n+        $stmt = $pdo->query(\"SELECT prim_durum_aciklama, COUNT(*) as count FROM primebaz_rapor WHERE prim_durum_aciklama IS NOT NULL AND prim_durum_aciklama != '' GROUP BY prim_durum_aciklama ORDER BY count DESC\");\r\n+        \r\n+        echo \"<h4>üìã Prim Durum A√ßƒ±klama Daƒüƒ±lƒ±mƒ±:</h4>\";\r\n+        echo \"<table>\";\r\n+        echo \"<tr><th>Prim Durum A√ßƒ±klama</th><th class='center'>Adet</th></tr>\";\r\n+        \r\n+        while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {\r\n+            echo \"<tr>\";\r\n+            echo \"<td><strong>\" . htmlspecialchars($row['prim_durum_aciklama']) . \"</strong></td>\";\r\n+            echo \"<td class='number'>\" . number_format($row['count']) . \"</td>\";\r\n+            echo \"</tr>\";\r\n+        }\r\n+        echo \"</table>\";\r\n+    } else {\r\n+        echo \"<div style='background-color: #fff3cd; padding: 15px; border-radius: 5px; margin: 20px 0;'>\";\r\n+        echo \"<p style='margin: 0;'>‚ö†Ô∏è Hen√ºz hi√ß veri y√ºklenmemi≈ü.</p>\";\r\n+        echo \"</div>\";\r\n+    }\r\n+    \r\n+} catch (Exception $e) {\r\n+    echo \"<div style='background-color: #f8d7da; padding: 15px; border-radius: 5px; margin: 20px 0;'>\";\r\n+    echo \"<p style='margin: 0;'>‚ùå <strong>Hata:</strong> \" . htmlspecialchars($e->getMessage()) . \"</p>\";\r\n+    echo \"</div>\";\r\n+}\r\n+?>\r\n+\r\n+<hr style=\"margin: 30px 0;\">\r\n+<div style=\"text-align: center;\">\r\n+    <h3>üîß ƒ∞≈ülemler</h3>\r\n+    <a href=\"primebaz_rapor_yukle.php\" class=\"link-button\">\udce4 Rapor Y√ºkleme Sayfasƒ±</a>\r\n+    <a href=\"?\" class=\"link-button\" onclick=\"location.reload();\">üîÑ Sayfayƒ± Yenile</a>\r\n+</div>\r\n+\r\n+</div>\r\n+</body>\r\n+</html>\n\\ No newline at end of file\n"
                }
            ],
            "date": 1759319722065,
            "name": "Commit-0",
            "content": "<?php\r\nrequire_once 'config/mssql.php';\r\n\r\ntry {\r\n    $pdo = new PDO('sqlsrv:Server=localhost\\\\SQLEXPRESS;Database=digiturk', '', '', [\r\n        PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION\r\n    ]);\r\n    \r\n    // Check record count\r\n    $stmt = $pdo->query(\"SELECT COUNT(*) as total FROM primebaz_rapor\");\r\n    $result = $stmt->fetch(PDO::FETCH_ASSOC);\r\n    \r\n    echo \"<h3>Database Status</h3>\";\r\n    echo \"Total records in primebaz_rapor: <strong>\" . $result['total'] . \"</strong><br><br>\";\r\n    \r\n    if ($result['total'] > 0) {\r\n        // Show sample records\r\n        $stmt = $pdo->query(\"SELECT TOP 5 bayi_adi, kampanya_kodu, odeme_tarihi, dosya_adi FROM primebaz_rapor ORDER BY id DESC\");\r\n        \r\n        echo \"<h4>Latest Records:</h4>\";\r\n        echo \"<table border='1'>\";\r\n        echo \"<tr><th>Bayi Adƒ±</th><th>Kampanya Kodu</th><th>√ñdeme Tarihi</th><th>Dosya</th></tr>\";\r\n        \r\n        while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {\r\n            echo \"<tr>\";\r\n            echo \"<td>\" . $row['bayi_adi'] . \"</td>\";\r\n            echo \"<td><strong>\" . $row['kampanya_kodu'] . \"</strong></td>\";\r\n            echo \"<td>\" . $row['odeme_tarihi'] . \"</td>\";\r\n            echo \"<td>\" . $row['dosya_adi'] . \"</td>\";\r\n            echo \"</tr>\";\r\n        }\r\n        echo \"</table>\";\r\n        \r\n        // Check for QWH, QWT, NYA values\r\n        $stmt = $pdo->query(\"SELECT kampanya_kodu, COUNT(*) as count FROM primebaz_rapor GROUP BY kampanya_kodu ORDER BY count DESC\");\r\n        \r\n        echo \"<h4>Kampanya Kodlarƒ± Daƒüƒ±lƒ±mƒ±:</h4>\";\r\n        echo \"<table border='1'>\";\r\n        echo \"<tr><th>Kampanya Kodu</th><th>Adet</th></tr>\";\r\n        \r\n        while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {\r\n            echo \"<tr>\";\r\n            echo \"<td><strong>\" . $row['kampanya_kodu'] . \"</strong></td>\";\r\n            echo \"<td>\" . $row['count'] . \"</td>\";\r\n            echo \"</tr>\";\r\n        }\r\n        echo \"</table>\";\r\n    }\r\n    \r\n} catch (Exception $e) {\r\n    echo '‚ùå Error: ' . $e->getMessage() . \"<br>\";\r\n}\r\n?>\r\n\r\n<hr>\r\n<h3>Upload Test</h3>\r\n<a href=\"primebaz_rapor_yukle.php\">üîó Go to Upload Page</a>"
        }
    ]
}